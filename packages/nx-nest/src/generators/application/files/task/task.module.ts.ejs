import { Module, NestModule } from '@nestjs/common'
import { ScheduleModule } from '@nestjs/schedule'
<% if (databaseOrm === DATABASE_ORM.TYPEORM) { %>import { TypeOrmModule } from '@nestjs/typeorm'<% } %>
<% if (databaseOrm === DATABASE_ORM.MONGOOSE) { %>import { MongooseModule } from '@nestjs/mongoose'<% } %>

import * as tasks from './modules'
<% if (databaseOrm !== DATABASE_ORM.NONE) { %>import { getDatabaseOptions } from '<%- orm.importPath -%>'<% } %>
import { ConfigService } from '@webundsoehne/nestjs-util'
<% if (microserviceProvider) { %>import { MicroserviceProviderModule } from '@webundsoehne/nestjs-util-microservices'<% } -%>

/**
 * Register all services under providers
 */
@Module({
  providers: [
    ConfigService
  ],
  imports: [
    ScheduleModule.forRoot(),
    <% if (databaseOrm === DATABASE_ORM.TYPEORM) { %>TypeOrmModule.forRoot(getDatabaseOptions()),<% } -%>
    <% if (databaseOrm === DATABASE_ORM.MONGOOSE) { %>MongooseModule.forRoot(...getDatabaseOptions()),<% } -%>
    <% if (microserviceProvider) { %>MicroserviceProviderModule.forRoot({ queue: [] }),<% } -%>
    ...Object.values(tasks)
    ]
})
export class TaskModule implements NestModule {
  // eslint-disable-next-line @typescript-eslint/no-empty-function
  async configure (): Promise<any> {}
}
