import { InternalServerErrorException } from '@nestjs/common'

import { Service } from './constants'
<% for (const metadata of applicationMetadata) { %>
  <%- metadata.applicationImports -%>
<% } %>

function bootstrap (): Promise<void> {
  // eslint-disable-next-line no-console
  console.log(
  // eslint-disable-next-line max-len
  `++++ ${process.env.npm_package_name} v${process.env.npm_package_version} starting on nodejs ${process.version}, environment is "${process.env.NODE_ENV}", service is "${process.env.NODE_SERVICE}" ++++`
  )

  switch (String(process.env.NODE_SERVICE).toLowerCase()) {
  <% for (const metadata of applicationMetadata) { %>
    <%- metadata.applicationCase -%>
  <% } %>
  default:
    throw new InternalServerErrorException('NODE_SERVICE environment variable is not set.')
  }
}

void bootstrap()
